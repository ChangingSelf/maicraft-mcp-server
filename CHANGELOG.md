# 更新日志

## [1.9.6] - 2025-09-23

- 调大mineflayer的断开连接判定间隔checkTimeoutInterval 

## [1.9.5] - 2025-09-21

- 添加`end`,`error`事件

## [1.9.4] - 2025-09-21

- 添加`forcedMove`事件，用于监听强制移动（例如tp）

## [1.9.3] - 2025-09-20

- 增强自动重连

## [1.9.2] - 2025-09-20

- 适配 `entityHurt`未写在官方文档中的source伤害来源

## [1.9.1] - 2025-09-18

- 修复空指针报错

## [1.9.0] - 2025-09-18

- 重构事件系统，纠正错误事件字段，添加事件 `itemDrop`和`Breath`

## [1.8.2] - 2025-09-15

- 临时屏蔽query开头的动作的日志，以免maicraft agent调用本项目时，webui刷屏

## [1.8.1] - 2025-09-15

- 修改日志输出格式，将参数和结果转换为JSON字符串，以便于调试和分析

## [1.8.0] - 2025-09-15

- 添加日志api，以便推送日志到web ui

## [1.7.1] - 2025-09-15

- 修复 `CraftWithRecipeAction` 非要走到方块旁边从而挖掉工作台的bug


## [1.7.0] - 2025-09-13

### 新增功能
- 更新MinecraftClient以支持收集方块的移动设置
- 添加聊天过滤功能，支持玩家黑名单和消息模式过滤
- 实现调试命令系统，添加聊天命令、帮助命令和测试命令
- 支持自动发现和注册命令
- 添加管理员玩家列表和聊天反馈功能
- 实现移动命令集成

### 优化
- 优化调试命令系统与聊天管理器的集成
- 回退inspector版本以提升稳定性


## [1.6.17] - 2025-09-13

- 去除`QueryAreaBlocksAction`和`QuerySurroundingsAction`的区域大小限制

## [1.6.16] - 2025-09-08

- 优化 `QuerySurroundingsAction` 和 `QueryAreaBlocksAction` 动作，添加不可见方块过滤开关

## [1.6.15] - 2025-09-08

- 优化 `QuerySurroundingsAction` 查询实体操作，额外返回玩家名称、物品信息
- 修复canSee字段不知为何有可能为null的问题，将其转换为false返回
- 修复 `MineBlockAction` 挖掘方块时，偶发性完成消息过滤失败

## [1.6.14] - 2025-09-07

- 添加 `playerCollect` 事件，以便得知谁捡到了什么物品

## [1.6.13] - 2025-09-06

优化方块放置

- 重构`PlaceBlockAction`，将其逻辑抽取到一个工具类
- 修复`MovementUtils`的GoalPlaceBlock选项无法传入正确的额外参数的问题
- 现在如果在自己占据的那2格放置方块，会先走到一个合适的位置再放

## [1.6.12] - 2025-09-06

- 修改`QuerySurrendingsAction`的参数和返回值结构，改为全查但添加canSee字段

## [1.6.11] - 2025-09-05

fork mineflayer-pathfinder, 使用了官方未合并的pr，修复了原地跳搭的bug

## [1.6.10] - 2025-09-04

- 查询方块动作去除enable_xray参数，把方块仍然返回，但添加字段canSee，用来标识该方块是否能被看到

## [1.6.9] - 2025-09-03

移动优化

- 统一移动动作的返回值的结构
- 允许在移动的时候指定移动目标类型

## [1.6.8] - 2025-09-03

- 新增动作`QueryAreaBlocksAction`

## [1.6.7] - 2025-09-03

- 优化`MoveAction`的返回值，如果只是距离不够近，不返回失败

## [1.6.6] - 2025-09-02

- 添加方块可见性限制，默认不可挖掘和查看bot视角看不见的方块

## [1.6.5] - 2025-09-02

- 解决移动时尝试垂直垫脚而原地跳很久的问题

## [1.6.4] - 2025-09-02

- 尝试修复依赖问题

## [1.6.3] - 2025-09-01

- 移除冲突的canvas依赖

## [1.6.2] - 2025-08-31

- 尝试修复发布后出现的无法运行的问题

## [1.6.1] - 2025-08-31

- 更新README
- 由于Maicraft这个名字给Maicraft Agent项目使用，所以本项目改名为maicraft-mcp-server

## [1.6.0] - 2025-08-31

- 添加 `ScreenshotAction` ，可以获取第一人称的base64格式的截图数据

## [1.5.9] - 2025-08-31

- 修复 `UseItemAction` 对食物的判断依据

## [1.5.8] - 2025-08-31

- 修改 `MineBlockAction` 对流体方块的判断依据

## [1.5.7] - 2025-08-31

- 添加 `BasicControlAction` ，提供基础的游戏控制功能，例如基础移动、跳跃、潜行、视角调整、物品丢弃、睡觉等

## [1.5.6] - 2025-08-31

- 添加 `UseItemAction` ，允许使用物品


## [1.5.5] - 2025-08-31

- 熔炉相关动作重构，删除原有的打开和回收熔炉物品，合并为 `UseFurnaceAction`
- 事件添加现实时间戳

## [1.5.4] - 2025-08-30

- 完善`UseChestAction`的参数描述
- 重构所有动作，抽取移动逻辑到工具类，以便复用

## [1.5.3] - 2025-08-30

### 新增功能
- `UseChestAction` 新增多箱子模式：当取出操作未指定特定箱子坐标时，自动从附近多个箱子中取够所需物品
- 支持智能箱子查找（最多10个箱子，最大搜索距离32格）
- 支持智能物品分配，从多个箱子累计取够所需数量
- 返回详细的多箱子操作报告，包括每个箱子的位置、内容和操作结果

### 优化
- `UseChestAction` 保持向后兼容，指定坐标时仍使用单箱子模式
- 优化箱子查找算法，使用 `findBlocks` 方法确保找到所有箱子并按距离排序
- 当所有物品都取够时提前结束搜索，提高效率

### 修复
- 修复多箱子查找逻辑，确保能够找到附近所有箱子而不是重复找到同一个箱子

## [1.5.2] - 2025-08-30

优化`UseChestAction`

- 允许取出多种物品
- 允许指定特定坐标的箱子
- 操作完将箱子内的物品信息也返回出去
- 如果需要取的物品数量大于箱子内的物品数量，也取完，但提示还差多少

## [1.5.1] - 2025-08-30

- `MineBlockAction` 挖掘后返回方块名
- `MineBlockAction` 不挖掘流体
- `MineBlockAction` 实现静默挖掘，拦截掉collect插件发出的“Collect Finish!”

## [1.5.0] - 2025-08-29

- 新增动作：`QueryRawRecipeAction`，直接给出原始查询方法，仅作简单封装
- 新增动作：`CraftWithRecipeAction`，直接使用配方进行合成
- 新增动作：`QueryBlockAction`，查询方块信息和容器内容
- `QueryPlayerStatusAction` 添加查询玩家俯仰角等信息

## [1.4.9] - 2025-08-28

- `CraftItemAction` 添加强制不使用工作台选项

## [1.4.8] - 2025-08-28

- `MineBlockAction` 添加只挖掘不收集选项

## [1.4.7] - 2025-08-27

### 优化

- `MineBlockAction` 去除参数必选

## [1.4.6] - 2025-08-27

### 优化

- `MineBlockAction` 指定坐标挖掘

## [1.4.5] - 2025-08-27

### 修复

- 修复oak_planks的配方无法查询的问题

## [1.4.4] - 2025-08-27

### 修复

- 修复只检查第一个配方的bug，并添加偏好材料参数

## [1.4.3] - 2025-08-27

### 优化

- `QueryRecipeAction` 将所有配方都查出，用标识区分是否需要工作台

## [1.4.2] - 2025-08-27

### 优化

- 挖掘方向和放置方向改啊为坐标轴表述而非东南西北

## [1.4.1] - 2025-08-27

### 新增功能
-  `MineBlockAction` 支持指定方向挖掘方块

## [1.4.0] - 2025-08-26

### 新增功能
- 新增绕过安全检查的挖掘功能，支持直接挖掘方块并记录挖掘过程

### 重构
- 更新多个动作的坐标参数描述，将绝对坐标改为相对坐标，修正相关逻辑以确保坐标处理的一致性
- 更新熔炉和移动操作的坐标参数描述，确保坐标为整数类型

## 修复
- 解决放置方块的成功检查错误
- 修复配方查询时查出显示名称的bug，改为返回实际物品名称

## [1.3.1] - 2025-08-25

### 修复

- 配方改为使用物品名称而不是显示名称

## [1.3.0] - 2025-08-25

### 新增功能
- 新增 `StartSmeltingAction` 类，支持在熔炉中开始熔炼物品（不等待完成）
- 新增 `CollectSmeltedItemsAction` 类，支持从熔炉中收集已熔炼完成的物品
- 优化熔炼体验，避免长时间等待阻塞其他操作

### 重构
- 将原来的 `SmeltItemAction` 删除，使用新的熔炼动作组合
- 删除 `FollowPlayerAction`，因为它已经被 `MoveAction` 上位替代
- 更新 README 文档，添加新熔炼动作的使用说明和示例
- 区分了 `CraftItemAction` 对没有配方和材料不足的返回值

## [1.2.5] - 2025-08-25

### 修复

- 修复queryRecipesAction的报错
- 添加提示词

## [1.2.4] - 2025-08-25

### 修复

在移动的过程中会敲掉重要方块例如箱子和熔炉


## [1.2.3] - 2025-08-25

### 优化
- 优化 MoveAction 和 SmeltItemAction 类
- 移除超时参数并调整默认值

## [1.2.1] - 2025-08-25

### 优化
- 优化 QueryPlayerStatusAction 类中的耐久度和位置计算逻辑
- 确保在获取属性时处理可靠性

## [1.2.0] - 2025-08-24

### 新增功能
- 新增 QueryRecipeAction 类，支持查询指定物品的合成配方及所需材料
- 优化配方转换逻辑并增强错误处理

### 重构
- 更新 PlaceBlockAction 类，使用 bot.registry 替代 minecraftData
- 新增检查玩家是否站在目标位置的逻辑
- 更新 QuerySurroundingsAction 类，移除 blockRange 参数
- 新增 useAbsoluteCoords 选项以支持绝对坐标
- 调整查询参数默认值，优化方块查询逻辑，改进位置数据结构
- 重构 QuerySurroundingsAction 类，简化查询参数
- 新增查询类型支持（玩家、实体、方块），优化日志输出

### 移除
- 移除玩家移动阈值设置方法

## [1.1.0] - 2025-08-24

### 新增功能
- 更新事件管理器，新增玩家死亡、重生、踢出、重生点重置、天气变化、实体受伤和死亡事件的支持
- 增强 QueryPlayerStatusAction 类，新增装备栏和生物群系信息查询功能
- 更新状态信息描述，优化物品栏信息
- 精简 QueryGameStateAction 类，移除冗余参数
- 增强游戏状态查询功能，新增在线玩家信息和时间描述
- 新增事件管理器，支持游戏事件的存储、管理与查询
- 更新相关动作以集成事件管理功能

### 重构
- 更新多个动作的 execute 方法返回类型为 ActionResult，以增强类型安全性
- 移除 StateManager 类及相关逻辑
- 新增多个查询动作以替代状态管理功能

### 文档
- 在 README 中新增动作开发最佳实践及基础交互动作的详细说明

### 依赖更新
- 将 mineflayer-collectblock 替换为 mineflayer-collectblock-colalab
- 调整相关配置

## [1.0.1] - 2025-08-13

### 新增功能
- 新增 MoveAction 类，支持多种移动方式（坐标、方块、玩家、实体）
- 增强参数校验与错误处理

### 重构
- 重构 PlaceBlockAction 以支持方块名称和绝对坐标
- 增强参数校验与错误处理

### 修复
- 修复 MoveAction 中方块名称的处理逻辑，移除不必要的 toLocaleLowerCase 调用
- 升级 mineflayer 版本，解决："Don't know how to get the enchants from an item"
- 修复动作的一些导入方式导致的 bug
- 更新 README 文档中的 execute 函数描述，修正 Promise 类型的显示格式

### 配置
- 在 package.json 中新增 pnpm 配置，指定仅构建依赖项 canvas 和 esbuild
- 完善 README 文档中的快速配置示例
- 优化配置文件处理逻辑

### 发布准备
- 为发布到 npm 做准备

---

## 版本说明

- **主版本号**：重大功能更新或架构变更
- **次版本号**：新功能添加
- **修订版本号**：Bug 修复和性能优化

